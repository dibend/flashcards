<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CompTIA Flashcard App</title>
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div class="container mt-5">
        <div class="card text-center">
            <div class="card-header">
                CompTIA Flashcard App
            </div>
            <div class="card-body">
                <div class="form-group">
                    <label for="category-select">Select Category:</label>
                    <select class="form-control" id="category-select"></select>
                </div>
                <h5 class="card-title" id="question">Loading...</h5>
                <p class="card-text" id="answer"></p>
                <button id="show-answer" class="btn btn-primary">Show Answer</button>
                <button id="next-flashcard" class="btn btn-success">Next</button>
                <button id="read-question" class="btn btn-info">Read Question</button>
                <button id="read-answer" class="btn btn-warning">Read Answer</button>
                <button id="shuffle-flashcards" class="btn btn-secondary">Shuffle Questions</button>
                <button id="toggle-dark-mode" class="btn btn-dark">Toggle Dark Mode</button>
                <br><br>
                <label for="bg-color-picker">Background Color:</label>
                <input class="colorz" type="color" id="bg-color-picker" class="btn">
                <label for="text-color-picker">Text Color:</label>
                <input class="colorz" type="color" id="text-color-picker" class="btn">
                <label for="form-bg-color-picker">Form Background Color:</label>
                <input class="colorz" type="color" id="form-bg-color-picker" class="btn">
                <button id="mark-known" class="btn btn-warning">Mark as Known</button>
                <button id="clear-known" class="btn btn-danger">Clear Known Questions</button>
                <button class="btn" id="install-button">Install App</button>
            </div>
            <div class="card-footer text-muted">
                Keep Studying!
            </div>
        </div>
    </div>
    <script>
        let deferredPrompt;

        window.addEventListener('beforeinstallprompt', (e) => {
            // Prevent the mini-infobar from appearing on mobile
            e.preventDefault();
            // Stash the event so it can be triggered later.
            deferredPrompt = e;
            // Update UI notify the user they can install the PWA
            document.getElementById('install-button').style.display = 'block';
        });

        document.getElementById('install-button').addEventListener('click', () => {
            // Show the install prompt
            deferredPrompt.prompt();
            // Wait for the user to respond to the prompt
            deferredPrompt.userChoice.then((choiceResult) => {
                if (choiceResult.outcome === 'accepted') {
                    console.log('User accepted the install prompt');
                } else {
                    console.log('User dismissed the install prompt');
                }
                // Clear the deferredPrompt variable, it can only be used once.
                deferredPrompt = null;
            });
        });
    </script>
    <script src="script.js"></script>
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/service-worker.js')
                    .then(registration => {
                        console.log('ServiceWorker registration successful with scope: ', registration.scope);
                    }, err => {
                        console.log('ServiceWorker registration failed: ', err);
                    });
            });
        }
    </script>
</body>

</html>